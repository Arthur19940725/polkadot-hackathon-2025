# DeciCourt dApp 项目方案书 — v1.0

**项目名称：** DeciCourt dApp  
**版本：** v1.0 MVP  
**日期：** 2025年10月  
**目标：** Dot Your Future: Create, Connect, Transform — Hackathon MVP 交付

---

## 一、项目总览

### 1.1 项目背景

**传统司法仲裁的痛点**

传统司法系统面临诸多挑战：审理周期长、成本高昂、透明度不足、跨域执行困难。特别是在小额争议、商业纠纷、数字资产争议等领域，传统司法途径往往不够高效。Web3 世界的快速发展，更是对争议解决机制提出了新的要求。

**区块链技术的解决方案**

区块链技术的去中心化、不可篡改、透明公开等特性，为构建新型争议解决机制提供了理想的技术基础。通过智能合约自动执行、代币激励机制、链上投票等方式，可以打造更加公平、高效、透明的数字法庭系统。

### 1.2 项目简介

DeciCourt dApp 是一个基于 Polkadot 生态的**去中心化数字法庭系统**，通过区块链技术重构争议解决流程。系统采用"陪审团 + 智能合约"的创新模式，为用户提供透明、高效、公正的争议仲裁服务。

### 1.3 核心价值主张

- **去中心化仲裁**：无需传统司法机构介入，完全由社区治理
- **透明公正**：所有流程链上记录，投票过程公开透明
- **高效低成本**：自动化执行，大幅降低仲裁成本和时间
- **经济激励**：基于代币的激励机制，确保参与者积极性
- **跨链兼容**：基于 Polkadot 生态，支持多链资产争议

### 1.4 核心业务流程

```
争议解决流程：
1. 提交案件 → 2. 陪审员选择 → 3. 证据展示 → 4. 投票仲裁 → 5. 执行判决
```

---

## 二、用户画像与场景设计

### 2.1 目标用户群体

**主要用户：争议当事人**
- **特征**：面临合同纠纷、交易争议、协议违约等问题
- **需求**：寻求快速、公正、低成本的争议解决方案
- **痛点**：传统司法成本高、周期长、程序复杂

**核心用户：陪审员**
- **特征**：具备一定法律常识或行业经验的社区成员
- **需求**：通过参与仲裁获得代币奖励，建立声誉
- **动机**：经济激励 + 社区治理参与感

### 2.2 应用场景

#### 2.2.1 数字资产交易争议
```
场景：NFT交易纠纷
流程：买家支付ETH购买NFT → 卖家未按约定交付 → 提交DeciCourt仲裁
解决：陪审团审查证据 → 投票裁决 → 智能合约自动执行退款
```

#### 2.2.2 协议争议
```
场景：项目治理争议
流程：社区成员对治理提案存在分歧 → 提交争议仲裁申请
解决：选择相关领域专业陪审员 → 审议提案合理性 → 投票决定执行方案
```


### 2.3 用户体验设计

#### 2.3.1 设计原则
- **专业可信**：体现司法系统的严肃性和权威性
- **简洁高效**：简化复杂的法律流程，提高用户体验
- **透明公开**：所有流程公开可查，建立信任机制
- **移动友好**：支持多设备访问，方便随时参与

#### 2.3.2 视觉风格
```
色彩体系：
- 主色：#1E3A8A (司法蓝) - 体现权威性和专业性
- 辅助色：#059669 (公正绿) - 代表公平和透明  
- 强调色：#DC2626 (警示红) - 用于重要提醒
- 中性色：#F9FAFB, #6B7280, #111827 - 确保可读性

字体系统：
- 主字体：Inter (现代专业)
- 标题字体：Poppins (权威感)
- 代码字体：JetBrains Mono (技术感)
```

---

## 三、技术架构与实现

### 3.1 系统架构总览

```
前端层 (Next.js + React)
    ↓
API层 (RESTful API + GraphQL)
    ↓
业务层 (案件管理 + 投票逻辑 + 激励机制)
    ↓
合约层 (Solidity 智能合约)
    ↓
区块链层 (Polkadot Hub + REVM兼容)
```

### 3.2 核心技术栈

**前端技术栈：**
- Next.js 15 (React 18)
- TypeScript
- Tailwind CSS + Headless UI
- wagmi + viem (Web3交互)
- React Hook Form (表单管理)

**后端技术栈：**
- Next.js API Routes
- Prisma ORM
- PostgreSQL
- Redis (缓存与会话)
- IPFS (证据存储)

**区块链技术栈：**
- Polkadot Hub Testnet
- Solidity ^0.8.19
- Hardhat + Hardhat Ignition
- OpenZeppelin Contracts

### 3.3 智能合约架构

**核心合约：**
- **DeciCourt.sol**: 主合约，管理案件生命周期
- **JuryToken.sol**: ERC20代币，用于质押和奖励

**合约功能模块：**
```
陪审员管理：
- 注册/注销陪审员
- 质押代币机制  
- 声誉评分系统

案件管理：
- 创建案件流程
- 证据提交机制
- 费用托管功能

投票系统：
- 承诺-揭示投票
- 防串通机制
- 自动计票功能

奖励分配：
- 胜诉方奖励
- 陪审员激励
- 质押返还机制
```

---

## 四、业务逻辑与规则

### 4.1 案件处理流程

**1. 案件创建阶段**
```typescript
// 原告提交案件
- 支付立案费：1 JURY Token
- 提供争议描述和证据IPFS哈希
- 设置争议金额和期望赔偿
- 智能合约自动分配案件ID
```

**2. 陪审员选择阶段**
```typescript
// 系统自动选择陪审员
- 从已质押陪审员中随机选择3人
- 考虑声誉分数和专业领域匹配
- 被选中陪审员有24小时响应时间
- 拒绝参与将影响声誉分数
```

**3. 投票仲裁阶段**
```typescript
// 承诺-揭示投票机制
- 陪审员查看证据材料
- 提交加密投票承诺（24小时）
- 揭示真实投票结果（24小时）
- 系统自动统计投票结果
```

**4. 判决执行阶段**
```typescript
// 智能合约自动执行
- 根据投票结果确定胜负方
- 自动分配奖励和返还质押
- 更新参与者声誉分数
- 记录案件处理结果
```

### 4.2 经济激励机制

**陪审员激励模型：**
```
基础奖励 = 立案费 × 60% ÷ 陪审员数量
声誉奖励 = 基础奖励 × 声誉系数(0.8-1.2)
正确投票奖励 = 总奖励池 × 10%（仅多数方获得）
```

**质押与惩罚机制：**
```
陪审员质押：100 JURY Tokens
恶意投票惩罚：扣除质押金额的10%
连续缺席惩罚：降低声誉分数
声誉恢复：通过后续正确投票逐步恢复
```

### 4.3 上诉机制

**上诉条件：**
- 败诉方可在72小时内提起上诉
- 需支付2倍立案费作为上诉押金
- 重新组成5人陪审团进行二审

**二审规则：**
- 陪审团规模扩大至5人
- 投票门槛提高至60%多数
- 上诉成功则撤销原判，失败则没收押金

---

## 五、前端界面设计

### 5.1 整体布局设计

#### 5.1.1 导航结构
```
主导航：
- 首页 (案件大厅)
- 我的案件 (当事人视角)  
- 陪审任务 (陪审员视角)
- 个人中心 (统计与设置)
- 帮助中心 (使用指南)

用户状态：
- 钱包连接状态
- 代币余额显示
- 角色身份切换 (当事人/陪审员)
```

#### 5.1.2 首页 - 案件大厅
```
┌─────────────────────────────────────┐
│ 导航栏 [Logo] [连接钱包] [余额]      │
├─────────────────────────────────────┤
│ 系统概览统计                        │
│ ┌─────────────────────────────────┐ │
│ │ 📊 总案件数: 1,234              │ │
│ │ ⚖️  已结案: 1,198               │ │  
│ │ 🏛️  活跃陪审员: 89              │ │
│ │ 💰 总奖励池: 45,678 JURY        │ │
│ └─────────────────────────────────┘ │
├─────────────────────────────────────┤
│ 快速操作                            │
│ [🆕 提交新案件] [👨‍⚖️ 成为陪审员]    │
├─────────────────────────────────────┤
│ 最新案件列表                        │
│ ┌─────────────────────────────────┐ │
│ │ 案件 #1001 - NFT交易纠纷        │ │
│ │ 状态: 投票中 ⏱️ 剩余18小时      │ │
│ │ 争议金额: 2.5 ETH               │ │
│ │ 陪审员: 3/3 ✅                  │ │
│ │ [查看详情]                      │ │
│ └─────────────────────────────────┘ │
└─────────────────────────────────────┘
```

#### 5.1.3 案件详情页
```
┌─────────────────────────────────────┐
│ 案件 #1001 - NFT交易纠纷             │
│ 状态: 投票中 🔴 剩余时间: 18:45:23   │
├─────────────────────────────────────┤
│ 案件信息                            │
│ 原告方: 0x1234...abcd               │
│ 被告方: 0x5678...efgh               │
│ 争议金额: 2.5 ETH                   │
│ 立案时间: 2025-10-01 14:30          │
│ 立案费: 1 JURY                      │
├─────────────────────────────────────┤
│ 争议描述                            │
│ 买家已支付2.5 ETH购买NFT "Bored     │
│ Ape #1234"，但卖家在收款后未按      │
│ 约定时间转移NFT所有权...             │
├─────────────────────────────────────┤
│ 证据材料                            │
│ 📄 购买合约截图                     │
│ 💳 付款交易哈希: 0xabc123...        │
│ 📱 聊天记录截图                     │
│ 🔗 [查看IPFS证据链接]               │
├─────────────────────────────────────┤
│ 陪审员投票                          │
│ 👨‍⚖️ 陪审员1: ⏳ 投票中             │
│ 👩‍⚖️ 陪审员2: ✅ 已投票             │  
│ 👨‍⚖️ 陪审员3: ✅ 已投票             │
│ 进度: 2/3 已投票                    │
└─────────────────────────────────────┘
```

#### 5.1.4 投票界面 (陪审员视角)
```
┌─────────────────────────────────────┐
│ 陪审投票 - 案件 #1001                │
│ ⚠️  请仔细审查证据后进行投票          │
├─────────────────────────────────────┤
│ 投票选项                            │
│ ┌─────────────────────────────────┐ │
│ │ ○ 支持原告方                    │ │
│ │   原告提供的证据充分，被告       │ │
│ │   确实违约，应支持原告诉求       │ │
│ │                                 │ │
│ │ ○ 支持被告方                    │ │
│ │   证据不足以证明被告违约，       │ │
│ │   或原告存在违约行为             │ │
│ └─────────────────────────────────┘ │
├─────────────────────────────────────┤
│ 投票理由 (可选)                     │
│ ┌─────────────────────────────────┐ │
│ │ 请简述您的投票理由...             │ │
│ │                                 │ │
│ │                                 │ │
│ └─────────────────────────────────┘ │
├─────────────────────────────────────┤
│ 🔒 您的投票将加密提交，在揭示阶段     │
│    才会公开。投票后无法修改。        │
│                                     │
│ [确认投票] [保存草稿]               │
└─────────────────────────────────────┘
```

### 5.2 用户角色界面

#### 5.2.1 陪审员管理页面
```
┌─────────────────────────────────────┐
│ 陪审员管理中心                       │
├─────────────────────────────────────┤
│ 注册状态                            │
│ ┌─────────────────────────────────┐ │
│ │ 🎖️  陪审员身份: 已注册            │ │
│ │ 💰 质押金额: 100 JURY ✅          │ │
│ │ ⭐ 声誉分数: 4.8/5.0             │ │
│ │ 📊 参与案件: 15个                │ │
│ │ 🎯 正确率: 87%                   │ │
│ └─────────────────────────────────┘ │
├─────────────────────────────────────┤
│ 当前任务                            │
│ ┌─────────────────────────────────┐ │
│ │ 🔔 新任务提醒: 1个                │ │
│ │ 案件 #1001 - NFT交易纠纷         │ │
│ │ ⏰ 投票截止: 17小时后            │ │
│ │ [立即处理]                      │ │
│ └─────────────────────────────────┘ │
├─────────────────────────────────────┤
│ 历史记录                            │
│ 📅 最近完成案件                     │
│ ✅ 案件 #0998 - 支持原告 (多数意见) │
│ ✅ 案件 #0995 - 支持被告 (多数意见) │
│ ❌ 案件 #0992 - 支持原告 (少数意见) │
│                                     │
│ 💰 累计收益: 45.6 JURY              │
└─────────────────────────────────────┘
```

#### 5.2.2 案件提交页面
```
┌─────────────────────────────────────┐
│ 提交新案件                          │
├─────────────────────────────────────┤
│ 基本信息                            │
│ 案件标题: [_________________]        │
│ 被告地址: [0x_______________]        │
│ 争议类型: [NFT交易 ▼]               │
│ 争议金额: [_____] ETH               │
├─────────────────────────────────────┤
│ 争议描述                            │
│ ┌─────────────────────────────────┐ │
│ │ 请详细描述争议经过，包括：         │ │
│ │ 1. 交易背景和约定条件            │ │
│ │ 2. 争议产生的具体原因            │ │
│ │ 3. 您期望的解决方案              │ │
│ │                                 │ │
│ └─────────────────────────────────┘ │
├─────────────────────────────────────┤
│ 证据材料                            │
│ 📎 上传证据文件 (将存储至IPFS)       │
│ [选择文件] 支持图片、PDF、文档       │
│                                     │
│ ✅ 已上传: 交易截图.png              │
│ ✅ 已上传: 聊天记录.pdf              │
├─────────────────────────────────────┤
│ 费用预览                            │
│ 立案费: 1 JURY Token                │
│ 您的余额: 156.8 JURY ✅              │
│                                     │
│ [🔐 确认提交并支付]                 │
└─────────────────────────────────────┘
```

---

## 六、API接口设计

### 6.1 接口规范

**基础信息：**
- **Base URL**: `https://api.decicourt.app/v1`
- **认证方式**: Wallet Signature + JWT
- **数据格式**: JSON
- **编码**: UTF-8

### 6.2 核心接口

#### 6.2.1 用户认证
```typescript
// 获取签名消息
POST /api/auth/nonce
Request: { walletAddress: string }
Response: { message: string, nonce: string }

// 验证签名登录  
POST /api/auth/verify
Request: { walletAddress: string, signature: string, message: string }
Response: { token: string, user: UserInfo }
```

#### 6.2.2 案件管理
```typescript
// 获取案件列表
GET /api/cases
Query: { status?: string, page?: number, limit?: number }
Response: { cases: Case[], pagination: Pagination }

// 创建新案件
POST /api/cases
Request: { title: string, defendant: string, description: string, evidence: string }
Response: { caseId: string, txHash: string }

// 获取案件详情
GET /api/cases/{caseId}
Response: { case: CaseDetail, evidence: Evidence[], votes: VoteStatus[] }
```

#### 6.2.3 陪审员管理
```typescript
// 注册陪审员
POST /api/jurors/register
Request: { stakeAmount: number, specialties: string[] }
Response: { success: boolean, txHash: string }

// 获取陪审任务
GET /api/jurors/tasks
Response: { tasks: JuryTask[], currentCase?: CaseInfo }

// 提交投票
POST /api/jurors/vote
Request: { caseId: string, vote: VoteOption, reason?: string }
Response: { success: boolean, commitmentHash: string }
```

---

## 七、数据模型设计

### 7.1 核心数据表结构

```typescript
// 用户表
interface User {
  id: string;
  walletAddress: string;
  isJuror: boolean;
  reputation: number;
  totalCases: number;
  successRate: number;
  createdAt: Date;
}

// 案件表  
interface Case {
  id: string;
  plaintiff: string;
  defendant: string;
  title: string;
  description: string;
  evidenceHash: string;
  status: CaseStatus;
  filingFee: number;
  createdAt: Date;
  deadlines: {
    commitPhase: Date;
    revealPhase: Date;
  };
}

// 陪审员表
interface Juror {
  userId: string;
  stakeAmount: number;
  reputation: number;
  correctVotes: number;
  totalVotes: number;
  specialties: string[];
  isActive: boolean;
}

// 投票记录表
interface Vote {
  id: string;
  caseId: string;
  jurorId: string;
  commitmentHash: string;
  vote?: VoteOption;
  reason?: string;
  submittedAt: Date;
  revealedAt?: Date;
}
```

---

## 八、项目目录结构

```
deci_court/
├─ contracts/                # 智能合约
│  ├─ DeciCourt.sol         # 主合约
│  └─ JuryToken.sol         # 代币合约
│
├─ ignition/                # 部署配置
│  └─ modules/
│     ├─ DeciCourtModule.js
│     └─ JuryTokenModule.js
│
├─ scripts/                 # 交互脚本
│  └─ interact.js           # 合约交互测试
│
├─ test/                    # 测试文件
│  └─ DeciCourt.test.js     # 主合约测试
│
├─ hardhat.config.js        # Hardhat配置
├─ package.json             # 项目依赖
└─ README.md               # 项目说明
```

---

## 九、已部署合约信息

### 9.1 合约地址

**网络**: Passet Hub Testnet (Chain ID: 420420422)

- **JuryToken**: `0x07eB8A200793Ec7055ADD629C926cE6c65DC68Ac`
- **DeciCourt**: `0x1A327ff18EF54eCF1B0AE4F885B78eCcF00A003E`

**区块浏览器**: https://blockscout-passet-hub.parity-testnet.parity.io/

### 9.2 合约参数

```
系统参数：
- 立案费: 1 JURY Token
- 陪审员质押: 100 JURY Token  
- 陪审团规模: 3人 (一审) / 5人 (二审)
- 投票时间: 24小时 (承诺) + 24小时 (揭示)
- 上诉时间: 72小时
- 惩罚比例: 10% (恶意投票)
```

---

## 十、技术创新点

### 10.1 承诺-揭示投票机制

通过两阶段投票防止陪审员串通：
- **承诺阶段**: 提交加密投票哈希，隐藏真实投票
- **揭示阶段**: 公开真实投票，验证承诺一致性

### 10.2 声誉评分系统

基于历史投票准确性建立信誉机制：
- 正确投票 (多数意见) → 声誉提升
- 错误投票 (少数意见) → 声誉下降  
- 声誉影响陪审员选择概率和奖励系数

### 10.3 经济激励优化

设计平衡的代币经济模型：
- 质押机制确保陪审员责任心
- 动态奖励机制激励高质量参与
- 惩罚机制威慑恶意行为

---

## 十一、风险控制与安全

### 11.1 技术安全

- **智能合约审计**: 使用 OpenZeppelin 标准库
- **重入攻击防护**: ReentrancyGuard 保护
- **权限控制**: 基于角色的访问控制
- **数据验证**: 多层参数校验机制

### 11.2 业务风险控制

- **防串通机制**: 承诺-揭示投票 + 随机选择
- **质量保证**: 声誉系统 + 质押惩罚
- **争议处理**: 多层上诉机制
- **紧急措施**: 暂停功能用于异常情况

---

## 十二、未来发展规划

### 12.1 功能扩展

- **多链支持**: 扩展至以太坊、BSC等主流链
- **专业领域**: 针对不同争议类型的专业陪审团
- **AI辅助**: 智能证据分析和案件分类
- **DAO治理**: 社区治理系统参数升级

### 12.2 生态建设

- **合作伙伴**: 与DeFi、NFT项目集成争议解决
- **开发者工具**: 提供SDK和API供第三方集成
- **法律合规**: 与传统法律机构建立桥接机制
- **用户教育**: 完善的使用指南和最佳实践

---

## 十三、总结

DeciCourt dApp v1.0 作为 MVP 版本，成功实现了去中心化争议解决的核心功能。通过区块链技术的透明性、智能合约的自动执行能力，以及经济激励机制的巧妙设计，为 Web3 世界提供了一个高效、公正、低成本的数字法庭解决方案。

**核心优势：**
1. **技术创新**: 承诺-揭示投票机制确保投票公正性
2. **经济激励**: 平衡的代币经济模型激励优质参与
3. **用户体验**: 简洁直观的界面降低使用门槛
4. **安全可靠**: 多重安全机制保障系统稳定运行
5. **扩展性强**: 模块化架构支持功能持续迭代

该系统不仅解决了传统司法仲裁的痛点，更为区块链生态的健康发展提供了重要的基础设施支撑，具有广阔的应用前景和商业价值。

